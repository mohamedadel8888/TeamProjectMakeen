# Maven
# Build your Java project and run tests with Apache Maven.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/java

trigger:
- main
pool:
  name: Qline-automation-10.0.0.65

jobs:
- job: RunTests
  displayName: "تشغيل الاختبارات"  # Arabic translation of "Run Tests"
  timeoutInMinutes: 0
  steps:
  
  - script: 
      $env:LANG="ar_SA.UTF-8"
    displayName: "Setting Arabic Locale"

  - task: Maven@3
    inputs:
      mavenPomFile: 'pom.xml'
      mavenOptions: '-Xmx3072m'
      javaHomeOption: 'Path'
      jdkDirectory: 'C:\Program Files\Java\jdk-23'
      publishJUnitResults: true
      testResultsFiles: '**/surefire-reports/TEST-*.xml'
      mavenAuthenticateFeed: false
      effectivePomSkip: false
      sonarQubeRunAnalysis: false
      goals: 'test -Dsurefire.suiteXmlFiles=testng.xml'
    displayName: "تشغيل الاختبارات باستخدام Maven"  # Arabic display name for running Maven tests


      
    # - task: PublishBuildArtifacts@1
  #   condition: failed()
  #   displayName: 'Publish Screenshots as Artifact'
  #   inputs:
  #     PathtoPublish: 'C:\TFS 24agent\vsts-agent-win-x64-4.246.1\_work\1\s\Dashboard-master\Screens\screenshots'
  #     ArtifactName: 'screenshots'